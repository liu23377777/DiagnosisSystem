<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åŒ»ç”Ÿç”³è¯·</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
        }
        h1 { color: #667eea; margin-bottom: 20px; }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
        }
        .btn {
            padding: 12px 30px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn:hover { background: #5568d3; }
        .success {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
        }
        .application-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
        }
        .status-pending { color: #856404; }
        .status-approved { color: #155724; }
        .status-rejected { color: #721c24; }
    </style>
</head>
<body>
<div class="container">
    <h1>ğŸ“ åŒ»ç”Ÿç”³è¯·</h1>
    <p>æ¬¢è¿ï¼Œ<span th:text="${user.realName}"></span> (<span th:text="${user.role}"></span>)</p>

    <div th:if="${success}" class="success" th:text="${success}"></div>

    <form method="post" action="/doctor/apply">
        <input type="hidden" name="userId" th:value="${user.id}">

        <div class="form-group">
            <label>çœŸå®å§“å *</label>
            <input type="text" name="realName" th:value="${user.realName}" required>
        </div>

        <div class="form-group">
            <label>æ‰‹æœºå· *</label>
            <input type="tel" name="phone" th:value="${user.phone}" required>
        </div>

        <div class="form-group">
            <label>æ‰€åœ¨åŒ»é™¢ *</label>
            <input type="text" name="hospital" placeholder="åŒ—äº¬ä¸­åŒ»è¯å¤§å­¦é™„å±åŒ»é™¢" required>
        </div>

        <div class="form-group">
            <label>ç§‘å®¤ *</label>
            <input type="text" name="department" placeholder="ä¸­åŒ»å†…ç§‘" required>
        </div>

        <div class="form-group">
            <label>èŒç§° *</label>
            <select name="title" required>
                <option value="">è¯·é€‰æ‹©èŒç§°</option>
                <option value="ä½é™¢åŒ»å¸ˆ">ä½é™¢åŒ»å¸ˆ</option>
                <option value="ä¸»æ²»åŒ»å¸ˆ">ä¸»æ²»åŒ»å¸ˆ</option>
                <option value="å‰¯ä¸»ä»»åŒ»å¸ˆ">å‰¯ä¸»ä»»åŒ»å¸ˆ</option>
                <option value="ä¸»ä»»åŒ»å¸ˆ">ä¸»ä»»åŒ»å¸ˆ</option>
            </select>
        </div>

        <div class="form-group">
            <label>ä»ä¸šå¹´é™ *</label>
            <input type="number" name="yearsExperience" min="0" required>
        </div>

        <div class="form-group">
            <label>åŒ»å¸ˆæ‰§ç…§å· *</label>
            <input type="text" name="licenseNumber" placeholder="110101199001011234" required>
        </div>

        <div class="form-group">
            <label>ç”³è¯·ç†ç”±</label>
            <textarea name="reason" rows="3" placeholder="å¸Œæœ›é€šè¿‡å¹³å°å¸®åŠ©æ›´å¤šæ‚£è€…"></textarea>
        </div>

        <button type="submit" class="btn">æäº¤ç”³è¯·</button>
    </form>

    <h2 style="margin-top: 30px;">æˆ‘çš„ç”³è¯·è®°å½•</h2>
    <div th:each="app : ${applications}" class="application-item">
        <p><strong>åŒ»é™¢:</strong> <span th:text="${app.hospital}"></span></p>
        <p><strong>èŒç§°:</strong> <span th:text="${app.title}"></span></p>
        <p><strong>çŠ¶æ€:</strong>
            <span th:if="${app.status == 0}" class="status-pending">å¾…å®¡æ ¸</span>
            <span th:if="${app.status == 1}" class="status-approved">å·²é€šè¿‡</span>
            <span th:if="${app.status == 2}" class="status-rejected">å·²æ‹’ç»</span>
        </p>
        <p th:if="${app.rejectReason}" style="color: #dc3545;">
            <strong>æ‹’ç»ç†ç”±:</strong> <span th:text="${app.rejectReason}"></span>
        </p>
        <p><strong>ç”³è¯·æ—¶é—´:</strong> <span th:text="${#temporals.format(app.createTime, 'yyyy-MM-dd HH:mm')}"></span></p>
    </div>
</div>
</body>
</html>
